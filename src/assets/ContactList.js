import{e as h,a as i,r as a,g as y,j as t,d as b}from"./main.js";const C=({client:n})=>{const l=h(),f=i(e=>e.common.loading),p=i(e=>e.common.error),d=i(e=>e.common.contact_list)||[],[s,m]=a.useState(""),[c,x]=a.useState([]);a.useEffect(()=>{n&&l(y())},[n,l]),a.useEffect(()=>{const e=d.filter(o=>o.phone&&o.phone.trim()!=="");if(!s.trim())x(e);else{const o=s.toLowerCase();x(e.filter(r=>r.name&&r.name.toLowerCase().includes(o)||r.phone&&r.phone.toLowerCase().includes(o)||r.email&&r.email.toLowerCase().includes(o)))}},[s,d]);const u=e=>{n&&n.invoke("routeTo","user",e)},g=e=>{const o=document.getElementById("zoomCCP");if(!(o!=null&&o.contentWindow))return;const r=o.contentWindow.postMessage({type:"zp-make-call",data:{name:e.name||"",number:e.phone||""}},"https://applications.zoom.us");typeof window.togglePlatform=="function"&&window.togglePlatform(),console.log("Call initiation response: contactlist",r)};return f?t.jsx("p",{style:{color:"var(--text-primary)"},children:"Loading contacts..."}):p?t.jsx("p",{style:{color:"var(--text-primary)"},children:p}):t.jsxs("div",{style:{padding:"8px",fontFamily:"Segoe UI, sans-serif",flex:1,overflowY:"auto",background:"var(--background)",display:"flex",flexDirection:"column"},children:[t.jsx("input",{type:"text",value:s,onChange:e=>m(e.target.value),placeholder:"Search by name, number or email...",style:{marginBottom:"12px",padding:"8px",borderRadius:"6px",border:"1px solid var(--input-border)",fontSize:"14px",background:"var(--input-bg)",color:"var(--text-primary)",outline:"none"}}),c.length===0?t.jsx("p",{style:{color:"var(--text-secondary)"},children:"No contacts found"}):c.map(e=>t.jsxs("div",{onClick:()=>u(e.id),style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"var(--surface)",padding:"10px",borderRadius:"8px",marginBottom:"8px",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",color:"var(--text-primary)"},onMouseEnter:o=>{o.currentTarget.style.transform="scale(1.02)",o.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.12)"},onMouseLeave:o=>{o.currentTarget.style.transform="scale(1)",o.currentTarget.style.boxShadow="0 1px 4px rgba(0,0,0,0.08)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"#2196f3",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"14px"},children:e.name?e.name[0].toUpperCase():"?"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsx("span",{style:{fontWeight:600},children:e.name||"Unknown"}),e.email&&t.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:e.email}),e.phone&&t.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:e.phone})]})]}),t.jsx("div",{style:{display:"flex",gap:"10px",fontSize:"16px",color:"#4caf50"},children:e.phone&&t.jsx(b,{title:"Call",onClick:o=>{o.stopPropagation(),g(e)},style:{cursor:"pointer",color:"#4caf50",transform:"rotateY(180deg)"}})})]},e.id))]})};export{C};
